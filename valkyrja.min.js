var Config={};!function(){Config.GLOBALS=window.GLOBALS=window.GLOBALS||{},Config.VERSION="2.0.0. alpha",Config.DEBUG=Config.GLOBALS.DEBUG||Config.GLOBALS.IS_DEV||!1,Config.global=window}();var is={};!function(){is.typeOf=function(e,t){return typeof e===t},is.modernBrowser="querySelector"in document&&"addEventListener"in window&&"localStorage"in window&&"sessionStorage"in window&&"bind"in Function&&("XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest||"XDomainRequest"in window),is.bool=function(e){return is.typeOf(e,"boolean")},is.array=Array.isArray,is.object=function(e){return is.typeOf(e,"object")},is.document=function(e){return e===document},is.window=function(e){return e===e.window},is.element=function(e){return e instanceof HTMLElement},is.nodeList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)},is.htmlCollection=function(e){return"[object HTMLCollection]"===Object.prototype.toString.call(e)},is.htmlList=function(e){return is.nodeList(e)||is.htmlCollection(e)},is.string=function(e){return is.typeOf(e,"string")},is.numeric=function(e){return e-parseFloat(e)>=0},is.$=function(e){return e instanceof Dom},is.bool=function(e){return is.typeOf(e,"boolean")},is.func=function(e){return is.typeOf(e,"function")},is.invalid=function(e){return is.undefined(e)||null===e||!e},is.undefined=function(e){return is.typeOf(e,"undefined")},is.array.empty=function(e){return 0==e.length},is.object.empty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},is.string.empty=function(e){return!e}}();var Logger={};!function(){Logger.log=function(){Config.DEBUG&&console.log.apply(console,arguments)},Logger.info=function(){Config.DEBUG&&console.info.apply(console,arguments)},Logger.warn=function(){Config.DEBUG&&console.warn.apply(console,arguments)},Logger.debug=function(){Config.DEBUG&&console.debug.apply(console,arguments)},Logger.error=function(){Config.DEBUG&&console.error.apply(console,arguments)},Logger.time=function(){Config.DEBUG&&console.time.apply(console,arguments)},Logger.timeEnd=function(){Config.DEBUG&&console.timeEnd.apply(console,arguments)}}();var Utils={};!function(){Utils.clone=function(e,t){return t=t?[]:{},is.empty.object(e)&&is.empty.array(e)?t:Utils.extend(t,e)},Utils.each=function(e,t){if((is.object(e)||!is.empty.array(e))&&is.func(t)){var n;for(n in e)e.hasOwnProperty(n)&&t(n,e[n])}},Utils.extend=function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},Utils.extendClass=function(e){var t=function(){e.call(this)};return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t},Utils.merge=function(e,t){return e&&t}}(),function(){Array.clone=function(e){return Utils.clone(e,!0)},Array.contains=function(e,t){return Array.prototype.indexOf.call(e,t)!=-1},Array.insert=function(e,t){Array.contains(e,t)||e.push(t)},Object.defineProperties(Array.prototype,{clone:{value:function(){return Array.clone(this)},writable:!0},contains:{value:function(e){return Array.contains(this,e)},writable:!0},insert:{value:function(e){return Array.insert(this,e)},writable:!0}})}(),function(){Object.validate=function(e){return is.empty.object(e)?{}:e},Object.first=function(e){for(var t in e)if(e.hasOwnProperty(t))return e[t]},Object.defineProperties(Object,{clone:{value:Utils.clone,writable:!0},each:{value:Utils.each,writable:!0},extend:{value:Utils.extend,writable:!0}}),Object.defineProperties(Object.prototype,{length:{value:function(){var e,t=0;for(e in this)this.hasOwnProperty(e)&&t++;return t},writable:!0},clone:{value:function(){return Object.clone(this)},writable:!0},each:{value:function(e){return Object.each(this,e)},writable:!0},extend:{value:function(e){return Object.extend(this,e)},writable:!0},first:{value:function(){return Object.first(this)},writable:!0},validate:{value:function(){return Object.validate(this)},writable:!0}})}(),function(){String.makeSafe=function(e){return e?String(e):""},String.contains=function(e,t){return!(!e||!t)&&String.prototype.indexOf.call(e,t)!==-1},String.containsInsensitive=function(e,t){return!(!e||!t)&&String.contains(e.toLowerCase(),t.toLowerCase())},String.compare=function(e,t){return e===t},String.compareInsensitive=function(e,t){return!(!e||!t)&&e.toLowerCase()===t.toLowerCase()}}();var Http=function(e,t){return new Http.Init(e,t)};!function(){Http.BASE_URL=GLOBALS.AJAX_URL||"",Http.Init=function(e,t){if(is.string.empty(e)){if(is.object(e)&&(t=e),!is.string(t.url))return!1;e=t.url}t=t||{};var n,o,r,i=new XMLHttpRequest,s=is.string(t.method)?t.method:"GET",c=is.string(t.accept)?t.accept:"application/json, text/javascript, */*",l=!is.bool(t.async)||t.async,a=is.string(t.contentType)?t.contentType:"application/x-www-form-urlencoded; charset=UTF-8",u=is.object(t.data)?t.data:{},p=is.object(t.headers)?t.headers:{},m=is.string(t.dataString)?t.dataString:"",h=0;i.open(s,e,l),i.setRequestHeader("Accept",c),i.setRequestHeader("Content-Type",a),i.setRequestHeader("X-Requested-With","XMLHttpRequest");for(n in p)p.hasOwnProperty(n)&&i.setRequestHeader(n,p[n]);return o=function(){4!==i.readyState&&l!==!1||(r=i.responseText,200!=i.status?(Logger.error("XHR Error: Begin"),Logger.error("Response: ",r),Logger.error("status",i.status),Logger.error("XHR Error: End"),is.func(t.error)&&t.error(r)):(Logger.info("Http Success"),is.func(t.success)&&t.success(r)),is.func(t.complete)&&t.complete(r))},l===!0&&(i.onreadystatechange=o),u.each(function(e,t){h>0&&(m+="&"),m+=e+"="+t,h++}),i.send(m),l===!1&&o(),i},Http.Init.prototype=Http.prototype,Http.prototype.constructor=Http,Http.method=function(e,t,n){return is.object(e)&&(t=e),t=t||{},t.extend({method:n}),new Http.Init(e,t)},Http.post=function(e,t){return Http.method(e,t,"POST")},Http.update=function(e,t){return Http.method(e,t,"UPDATE")},Http.del=function(e,t){return Http.method(e,t,"DELETE")}}();var Auth=function(){},Cache={};!function(){Cache.get=function(e){return JSON.parse(localStorage.getItem(e))},Cache.set=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},Cache.len=function(){return localStorage.length},Cache.del=function(e){return localStorage.removeItem(e)},Cache.clear=function(){return localStorage.clear()}}();var Cookies={};!function(){Cookies.get=function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},Cookies.set=function(e,t,n,o,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(n)switch(n.constructor){case Number:s=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:s="; expires="+n;break;case Date:s="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(r?"; domain="+r:"")+(o?"; path="+o:"")+(i?"; secure":""),!0},Cookies.remove=function(e,t,n){return!(!e||!Cookies.has(e))&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},Cookies.has=function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},Cookies.keys=function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e},Cookies.getAll=function(){for(var e,t,n,o=document.cookie.split(";"),r={},i=0,s=o.length;i<s;i++)e=o[i].split("="),t=decodeURIComponent(e[0].trim()),n=decodeURIComponent(e[1]),r[t]=n;return r}}();var Dom=function(e,t){return new Dom.Init(e,t)};!function(){Dom.Init=function(e,t){return is.string(e)&&e?(this.selector=e,t&&(t.elem?(this.elem=t.elem,this.context=t.elem):(this.elem=t,this.context=t)),this.elem=this.getElements(this.elem,e),is.nodeList(this.elem)&&1===this.elem.length&&(this.elem=this.elem[0]),this):(this.elem=e||this.elem,this)},Dom.Init.prototype=Dom.prototype,Dom.prototype.constructor=Dom,Dom.prototype.elem=null,Dom.prototype.context=document,Dom.prototype.selector="",Dom.prototype.SPACE_SPLIT=" ",Dom.prototype.getElements=function(e,t){e||(e=document),t=t.trim();var n=String.contains(t,this.SPACE_SPLIT),o="getElementById",r=t.charAt(0),i="#"===r;return i?(t=t.substr(1),e=document):n||"."!==r?o=n?"querySelectorAll":"getElementsByTagName":(t=t.substr(1),o="getElementsByClassName"),e=e[o](i&&n?t.substr(0,t.indexOf(this.SPACE_SPLIT)):t),i&&n&&(e=this.getElements(e,t.replace(e.id,""))),e},Dom.prototype.find=function(e){return Dom(this.getElements(this.elem,e))},Dom.prototype.parent=function(){return Dom(this.get(0).parentNode)},Dom.prototype.get=function(e){return this.getLength()>0&&this.elem[e]?this.elem[e]:this.elem},Dom.prototype.closest=function(e,t){if(e){var n,o=t?t:this.get(0),r="className",i=!0,s="contains";for(String.contains(e,"#")?(r="id",e=e.substr(1)):String.contains(e,".")?e=e.substr(1):(r="tagName",s="compare"),n=o[r],"tagName"===r&&(n=n.toLowerCase());i===!0&&is.element(o);)n=o[r],"tagName"===r&&(n=n.toLowerCase()),i=!String[s](" "+n+" "," "+e+" "),i&&(o=o.parentNode);if(!i)return Dom(o)}return Dom("")},Dom.prototype.getLength=function(){return this.elem&&(this.elem.length||0===this.elem.length)?this.elem.length:this.elem?1:0},Dom.prototype.handleEvent=function(e,t,n,o){if(!e||!t||!n&&!o)return Logger.error("type, eventType, selector or callback was not provided",arguments),this;var r,i,s,c=this.elem,l=0,a=c.length,u=o,p=this;if(is.func(n)?(o=n,n=null,u=o):is.string.empty(n)||(u=function(e){e.selectorTarget=p.closest(n,e.target).elem,e.selectorTarget&&(e.selector=e.selectorTarget,o.apply(o,arguments))}),"dispatchEvent"===e?(s=new CustomEvent(t),i=[s]):i=[t,u,!1],c[e])c[e].apply(c,i);else for(;l<a;l++)r=c[l],r&&r[e]&&r[e].apply(r,i);return this},Dom.prototype.on=function(e,t,n){return this.handleEvent("addEventListener",e,t,n)},Dom.prototype.off=function(e,t,n){return e?this.handleEvent("removeEventListener",e,t,n):(this.elem.parentNode.replaceChild(this.elem.cloneNode(!0),this.elem),this)},Dom.prototype.trigger=function(e,t){return this.handleEvent("dispatchEvent",e,t)},Dom.prototype.val=function(e){if(e){var t=0,n=this.getLength();if(!this.elem.value){for(;t<n;t++)this.elem[t].value=e;return this}return this.elem.value=e,this}return this.html(e,"value")},Dom.prototype.text=function(e){return this.html(e,"text")},Dom.prototype.html=function(e,t){if(!e){var n="innerHTML",o=0,r=this.getLength(),i=[];if("text"===t&&(n="textContent"),"value"===t&&(n="value"),!this.elem[n]){for(;o<r;o++)i[o]=this.elem[o][n];return i}return this.elem[n]}return this.handleHTML("html",e)},Dom.prototype.append=function(e){return this.handleHTML("append",e)},Dom.prototype.prepend=function(e){return this.handleHTML("prepend",e)},Dom.prototype.handleHTML=function(e,t){var n,o=this.elem,r=0,i=o.length;if(is.string(t)&&(n=document.createElement("div"),n.innerHTML=t,t=n.childNodes),is.element(o))this.handlePend(e,t);else for(;r<i;r++)this.handlePend(e,t,o[r]);return this},Dom.prototype.handlePend=function(e,t,n){n=n||this.elem;var o,r,i=0;for("html"===e&&this.empty(n),t.length||(t=[t]),o=t.length;i<o;i++)r=t[i].cloneNode(!0),r&&n&&("prepend"===e?n.insertBefore(r,n.firstChild):n.appendChild(r));return this},Dom.prototype.empty=function(e){return e=e||this.elem,e.innerHTML="",this},Dom.prototype.remove=function(e){e=e||this.elem;var t=0,n=e.length;if(n)for(;t<n;t++)this.remove(e[t]);else e.parentNode.removeChild(e);return this},Dom.prototype.handleClass=function(e,t){if(!e||!t)return this;var n,o,r=this.getLength(),i=0,s=0,c=this.elem.classList;if(String.contains(e,this.SPACE_SPLIT))if(n=e.split(this.SPACE_SPLIT),o=n.length,is.element(this.elem))for(;i<o;i++)c[t](n[i]);else for(;s<r;s++)for(;i<o;i++)this.elem[s].classList[t](n[i]);else if(is.element(this.elem))c[t](e);else for(;i<r;i++)this.elem[i].classList[t](e);return this},Dom.prototype.addClass=function(e){return this.handleClass(e,"add")},Dom.prototype.removeClass=function(e){return this.handleClass(e,"remove")},Dom.prototype.toggleClass=function(e){return this.handleClass(e,"toggle")},Dom.prototype.hasClass=function(e){if(!e)return this;var t=this.elem;return is.element(this.elem)||(t=this.get(0)),String.contains(e,this.SPACE_SPLIT)&&(e=e.split(this.SPACE_SPLIT)[0]),t.classList.contains(e)},Dom.prototype.attrGet=function(e){return!!e&&this.get(0).getAttribute(e)},Dom.prototype.attrSet=function(e,t){if(!e||!t)return this;is.element(this.elem)&&this.elem.setAttribute(e,t);for(var n=0,o=this.getLength();n<o;n++)this.elem[n].setAttribute(e,t);return this},Dom.prototype.attrRemove=function(e){if(!e)return this;is.element(this.elem)&&this.elem.removeAttribute(e);for(var t=0,n=this.getLength();t<n;t++)this.elem[t].removeAttribute(e);return this},Dom.prototype.dataGet=function(e){return!!e&&this.attrGet("data-"+e)},Dom.prototype.dataSet=function(e,t){return e&&t?this.attrSet("data-"+e,t):this},Dom.prototype.dataRemove=function(e){return e?this.self.attrRemove("data-"+e):this}}(),function(){Dom.getDocument=function(){return document},Dom.getWindow=function(){return window},Dom.windowWidth=function(){return window.innerWidth},Dom.windowHeight=function(){return window.innerHeight},Dom.scrollTop=function(){return window.scrollY},Dom.documentWidth=function(){return document.documentElement.scrollWidth},Dom.documentHeight=function(){return document.documentElement.scrollHeight},Dom.parseHTML=function(e){var t,n,o=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),r=document.createElementNS("http://www.w3.org/1999/xhtml","body"),i=document.createElement("div"),s=0;for(o.documentElement.appendChild(r),i.innerHTML=e,n=i.childNodes.length;s<n;s++)t=i.childNodes[s].cloneNode(!0),r.appendChild(t);return o}}(),function(){Dom.elems={},Dom.elems.document=Dom(document),Dom.elems.window=Dom(window),Dom.elems.html=Dom("html"),Dom.elems.body=Dom("body"),Dom.elems.header=Dom("#header"),Dom.elems.main=Dom("#main"),Dom.elems.footer=Dom("#footer")}();var Router={};!function(){Router.routes={},Router.Controllers={},Router.prevController=null,Router.route=function(e,t,n,o){o||(o=!1),n=n.split("@"),this.routes[e]={templateId:t,controllerName:n[0],actionName:n[1],params:o}},Router.router=function(){var e=location.hash.slice(1)||"/";e=e.split("&"),e[0].indexOf("=")!==-1&&(e[1]=e[0],e[0]="/");var t=this.routes[e[0]],n=[],o=null,r=[];if(!t)return this.error(404);var i=!!this.Controllers[t.controllerName]&&new this.Controllers[t.controllerName],s=!!i&&i[t.actionName];if(!Dom.elems.main||!is.func(s))return this.error(404);if(t.params&&e.length>1){for(var c=1;c<e.length;c++)is.string(e[c])&&(o=e[c].split("="),Array.contains(t.params,o[0])&&(n[o[0]]=o[1]));for(var l=0;l<t.params.length;l++)r[l]=n[t.params[l]]}Router.prevController&&Router.prevController.remove&&Router.prevController.remove(),i.template=Handlebars.compile(Dom("#"+t.templateId).html()),s.apply(i,r),i.render(),Router.prevController=i},Router.error=function(e){var t=Dom("#errorTemplate").html(),n=Handlebars.compile(t),o=n({type:e});Dom.elems.main.html(o)},window.addEventListener("hashchange",Router.router),window.addEventListener("load",Router.router)}();var Template=function(e){return new Template.Init(e)};!function(){Template.Init=function(e){return this.extend(e)},Template.Init.prototype=Template.prototype,Template.prototype.constructor=Template}(),function(){Template.prototype.render=function(e){this.__setOptions.apply(this,arguments),this.__ensureElement(),this.initialize.apply(this,arguments),this.handleEvents(this.events)},Template.prototype.sID="",Template.prototype.elem="",Template.prototype.tagName="div",Template.prototype.className="",Template.prototype.template="",Template.prototype.attributes={},Template.prototype.events={},Template.prototype.__options=["Model","Collection","elem","sID","attributes","className","tagName","events"],Template.prototype.EVENT_SPLIT=" ",Template.prototype.initialize=function(){return this},Template.prototype.Dom=function(e){return e?this.elem.find(e):this.elem},Template.prototype.setElement=function(e,t){return this.elem instanceof Dom?(this.undelegateEvents(),this.elem=e):this.elem=Dom(e),t!==!1&&this.handleEvents(this.events),this},Template.prototype.remove=function(){return this.undelegateEvents(),this.elem.remove(),this},Template.prototype.handleEvent=function(e,t,n,o){if(!e||!t)return Logger.error("event or callback method not specified",e,t),!1;var r=e.split(this.EVENT_SPLIT),i=r[0],s=r[1],c=o===!0?"off":"on",l=this,a=l.elem;if(n&&n[t]||(n=l),is.string(t)){if(!is.func(n[t]))return Logger.error("callback method is not a function",n[t]),!1;t=n[t].bind(n)}return a[c](i,s,t),l},Template.prototype.triggerEvent=function(e){if(!e)return!1;if(String.contains(e,this.EVENT_SPLIT)){var t=e.split(this.EVENT_SPLIT),n=t[0],o=t[1];this.Dom(o).trigger(n)}else this.elem.trigger(e);return this},Template.prototype.handleEvents=function(e,t){if(!e)return Logger.error("No events provided",e),!1;for(var n in e)e.hasOwnProperty(n)&&this.handleEvent(n,e[n],t);return this},Template.prototype.undelegateEvents=function(){return this.elem.off(".viewEvents"+this.sID),this},Template.prototype.__ensureElement=function(){this.elem||(this.elem=Dom(document)),this.setElement(this.elem,!1)},Template.prototype.__setOptions=function(e){if(is.object.empty(e))return!1;var t,n={};for(t in e)e.hasOwnProperty(t)&&this.__options.contains(t)&&(n[t]=e[t]);return this.extend(n),this}}();var Topics=function(e){var t=e&&Topics._topics[e],n=Topics;return t||(t={trigger:n.triggerTopic,subscribe:n.subscribeToTopic,unSubscribe:n.unSubscribeFromTopic,unSubscribeAll:n.unSubscribeAllFromTopic,_callbacks:[],scope:n},is.string.empty(e)||(n._topics[e]=t)),t};!function(){Topics._topics={},Topics.subscribeToTopic=function(e,t){if(t||(t=this.scope),!is.func(t[e]))return Logger.error("Scope or Callback incorrect."),!1;for(var n=0,o=this._callbacks.length;n<o;n++)if(this._callbacks[n].callback===e&&this._callbacks[n].scope===t)return!1;return this._callbacks.push({callback:e,scope:t}),this},Topics.unSubscribeFromTopic=function(e,t){if(!is.string(e))return!1;var n=0,o=this._callbacks.length;for(t||(t=this.scope);n<o;n++)if(this._callbacks[n].callback===e&&this._callbacks[n].scope===t){this._callbacks.splice(n,1);break}return this},Topics.triggerTopic=function(){for(var e,t=0,n=this._callbacks.length;t<n;t++)e=this._callbacks[t],e.scope[e.callback].apply(e.scope,arguments);return this},Topics.unSubscribeAllFromTopic=function(){return this._callbacks=[],this},Topics.handleTopics=function(e,t){if(is.object.empty(e))return!1;var n,o,r,i,s=this,c=typeof t===!0?"unsubscribe":"subscribe",l=0;for(r in e)if(e.hasOwnProperty(r))for(n=e[r],i=n.length;l<i;l++)o=n[l],is.object.empty(o.scope)&&(o.scope=s),s.Topic(r)[c](o.callback,o.scope);return this},Topics.removeTopics=function(){return this._topics={},this.topics={},this}}();var UserAgent={};!function(){UserAgent.UA=navigator.userAgent,UserAgent.contains=function(e){return String.contains(UserAgent.UA,e)},UserAgent.IE=UserAgent.contains("MSIE"),UserAgent.FIREFOX=UserAgent.contains("Firefox"),UserAgent.CHROME=UserAgent.contains("Chrome"),UserAgent.SAFARI=UserAgent.contains("Safari")&&!UserAgent.CHROME,UserAgent.IPHONE=UserAgent.contains("iPhone"),UserAgent.IPAD=UserAgent.contains("iPad"),UserAgent.ANDROID=UserAgent.contains("Android"),UserAgent.IOS=UserAgent.IPHONE||UserAgent.IPAD,UserAgent.WINDOWS_PHONE=UserAgent.contains("Windows Phone"),UserAgent.MOBILE=UserAgent.IOS||UserAgent.WINDOWS_PHONE||UserAgent.ANDROID,UserAgent.WINDOWS=UserAgent.contains("Windows NT"),UserAgent.MAC=UserAgent.contains("Macintosh"),UserAgent.LINUX=UserAgent.contains("Linux"),UserAgent.DESKTOP=!UserAgent.MOBILE}();